package cn.roilat.study.java.basic.classloader;

import java.net.MalformedURLException;

//import org.aspectj.weaver.bcel.ExtensibleURLClassLoader;

public class TestClassLoader3 {
    @SuppressWarnings("restriction")
    public static void main(String[] args) throws ClassNotFoundException, MalformedURLException {
//        ClassLoader cl;
        //ExtClassLoader ecl;
//        Launcher launcher;ExtensibleURLClassLoader
//        Thread.currentThread().setContextClassLoader(cl);
        /*System.out.println(System.getProperty("sun.boot.class.path"));//D:\softInstall\jdk1.8.0_66\jre\lib\resources.jar;D:\softInstall\jdk1.8.0_66\jre\lib\rt.jar;D:\softInstall\jdk1.8.0_66\jre\lib\sunrsasign.jar;D:\softInstall\jdk1.8.0_66\jre\lib\jsse.jar;D:\softInstall\jdk1.8.0_66\jre\lib\jce.jar;D:\softInstall\jdk1.8.0_66\jre\lib\charsets.jar;D:\softInstall\jdk1.8.0_66\jre\lib\jfr.jar;D:\softInstall\jdk1.8.0_66\jre\classes
        System.out.println(System.getProperty("java.ext.dirs"));//D:\softInstall\jdk1.8.0_66\jre\lib\ext;C:\windows\Sun\Java\lib\ext
        System.out.println(System.getProperty("java.class.path"));//D:\softInstall\jdk1.8.0_66\jre\lib\resources.jar;D:\softInstall\jdk1.8.0_66\jre\lib\rt.jar;D:\softInstall\jdk1.8.0_66\jre\lib\jsse.jar;D:\softInstall\jdk1.8.0_66\jre\lib\jce.jar;D:\softInstall\jdk1.8.0_66\jre\lib\charsets.jar;D:\softInstall\jdk1.8.0_66\jre\lib\jfr.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\access-bridge-64.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\cldrdata.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\dnsns.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\jaccess.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\jfxrt.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\localedata.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\nashorn.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\sunec.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\sunjce_provider.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\sunmscapi.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\sunpkcs11.jar;D:\softInstall\jdk1.8.0_66\jre\lib\ext\zipfs.jar;D:\WorkSpace\roilat\roilat-study\roilat-study-java\target\classes;D:\softInstall\eclipse1\eclipse\plugins\org.junit_4.12.0.v201504281640\junit.jar;D:\softInstall\eclipse1\eclipse\plugins\org.hamcrest.core_1.3.0.v201303031735.jar;D:\softInstall\eclipse1\eclipse\plugins\org.testng_6.14.2.r201802161450.jar;D:\softInstall\eclipse1\eclipse\plugins\com.beust.jcommander_1.72.0.jar;D:\softInstall\eclipse1\eclipse\plugins\org.apache-extras.beanshell.bsh_2.0.0.b6.jar;D:\softInstall\eclipse1\eclipse\plugins\org.yaml.snakeyaml_1.17.0.jar;D:\mvn-repository\org\acegisecurity\acegi-security\1.0.7\acegi-security-1.0.7.jar;D:\mvn-repository\org\springframework\spring-remoting\1.2.9\spring-remoting-1.2.9.jar;D:\mvn-repository\org\springframework\spring-support\1.2.9\spring-support-1.2.9.jar;D:\mvn-repository\oro\oro\2.0.8\oro-2.0.8.jar;D:\mvn-repository\org\apache\ant\ant\1.7.0\ant-1.7.0.jar;D:\mvn-repository\org\apache\ant\ant-launcher\1.7.0\ant-launcher-1.7.0.jar;D:\mvn-repository\antlr\antlr\2.7.7\antlr-2.7.7.jar;D:\mvn-repository\aopalliance\aopalliance\1.0\aopalliance-1.0.jar;D:\mvn-repository\org\aspectj\aspectjweaver\1.7.4\aspectjweaver-1.7.4.jar;D:\mvn-repository\org\apache\camel\camel-jackson\2.9.2\camel-jackson-2.9.2.jar;D:\mvn-repository\org\apache\camel\camel-core\2.9.2\camel-core-2.9.2.jar;D:\mvn-repository\cglib\cglib\2.2.2\cglib-2.2.2.jar;D:\mvn-repository\cglib\cglib-nodep\3.0\cglib-nodep-3.0.jar;D:\mvn-repository\commons-beanutils\commons-beanutils\1.7.0\commons-beanutils-1.7.0.jar;D:\mvn-repository\commons-chain\commons-chain\1.2\commons-chain-1.2.jar;D:\mvn-repository\commons-cli\commons-cli\1.2\commons-cli-1.2.jar;D:\mvn-repository\commons-codec\commons-codec\1.9\commons-codec-1.9.jar;D:\mvn-repository\org\apache\commons\commons-pool2\2.4.2\commons-pool2-2.4.2.jar;D:\mvn-repository\commons-collections\commons-collections\3.2.1\commons-collections-3.2.1.jar;D:\mvn-repository\commons-dbcp\commons-dbcp\1.4\commons-dbcp-1.4.jar;D:\mvn-repository\commons-dbutils\commons-dbutils\1.5\commons-dbutils-1.5.jar;D:\mvn-repository\org\apache\commons\commons-digester3\3.2\commons-digester3-3.2.jar;D:\mvn-repository\commons-discovery\commons-discovery\0.5\commons-discovery-0.5.jar;D:\mvn-repository\commons-fileupload\commons-fileupload\1.3.1\commons-fileupload-1.3.1.jar;D:\mvn-repository\commons-io\commons-io\2.4\commons-io-2.4.jar;D:\mvn-repository\commons-jexl\commons-jexl\1.1\commons-jexl-1.1.jar;D:\mvn-repository\commons-lang\commons-lang\2.1\commons-lang-2.1.jar;D:\mvn-repository\org\apache\commons\commons-lang3\3.1\commons-lang3-3.1.jar;D:\mvn-repository\commons-logging\commons-logging\1.2\commons-logging-1.2.jar;D:\mvn-repository\commons-net\commons-net\3.3\commons-net-3.3.jar;D:\mvn-repository\commons-pool\commons-pool\1.6\commons-pool-1.6.jar;D:\mvn-repository\commons-validator\commons-validator\1.4.0\commons-validator-1.4.0.jar;D:\mvn-repository\commons-digester\commons-digester\1.8\commons-digester-1.8.jar;D:\mvn-repository\javax\resource\connector-api\1.5\connector-api-1.5.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-bindings-soap\2.7.8\cxf-rt-bindings-soap-2.7.8.jar;D:\mvn-repository\org\apache\cxf\cxf-api\2.7.8\cxf-api-2.7.8.jar;D:\mvn-repository\org\codehaus\woodstox\woodstox-core-asl\4.2.0\woodstox-core-asl-4.2.0.jar;D:\mvn-repository\org\codehaus\woodstox\stax2-api\3.1.1\stax2-api-3.1.1.jar;D:\mvn-repository\org\apache\geronimo\specs\geronimo-javamail_1.4_spec\1.7.1\geronimo-javamail_1.4_spec-1.7.1.jar;D:\mvn-repository\wsdl4j\wsdl4j\1.6.3\wsdl4j-1.6.3.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-databinding-jaxb\2.7.8\cxf-rt-databinding-jaxb-2.7.8.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-core\2.7.8\cxf-rt-core-2.7.8.jar;D:\mvn-repository\com\sun\xml\bind\jaxb-impl\2.1.13\jaxb-impl-2.1.13.jar;D:\mvn-repository\org\apache\ws\xmlschema\xmlschema-core\2.0.3\xmlschema-core-2.0.3.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-frontend-jaxrs\2.7.8\cxf-rt-frontend-jaxrs-2.7.8.jar;D:\mvn-repository\javax\ws\rs\javax.ws.rs-api\2.0-m10\javax.ws.rs-api-2.0-m10.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-bindings-xml\2.7.8\cxf-rt-bindings-xml-2.7.8.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-transports-http\2.7.8\cxf-rt-transports-http-2.7.8.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-frontend-jaxws\2.7.8\cxf-rt-frontend-jaxws-2.7.8.jar;D:\mvn-repository\xml-resolver\xml-resolver\1.2\xml-resolver-1.2.jar;D:\mvn-repository\asm\asm\3.3.1\asm-3.3.1.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-frontend-simple\2.7.8\cxf-rt-frontend-simple-2.7.8.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-ws-addr\2.7.8\cxf-rt-ws-addr-2.7.8.jar;D:\mvn-repository\org\apache\cxf\cxf-rt-ws-policy\2.7.8\cxf-rt-ws-policy-2.7.8.jar;D:\mvn-repository\org\apache\neethi\neethi\3.0.2\neethi-3.0.2.jar;D:\mvn-repository\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;D:\mvn-repository\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;D:\mvn-repository\com\alibaba\druid\0.2.11\druid-0.2.11.jar;D:\mvn-repository\net\sf\ehcache\ehcache-core\2.6.9\ehcache-core-2.6.9.jar;D:\mvn-repository\org\apache\geronimo\specs\geronimo-jms_1.1_spec\1.1.1\geronimo-jms_1.1_spec-1.1.1.jar;D:\mvn-repository\com\google\code\gson\gson\2.2.4\gson-2.2.4.jar;D:\mvn-repository\org\hibernate\common\hibernate-commons-annotations\4.0.5.Final\hibernate-commons-annotations-4.0.5.Final.jar;D:\mvn-repository\org\hibernate\hibernate-core\4.3.11.Final\hibernate-core-4.3.11.Final.jar;D:\mvn-repository\org\hibernate\hibernate-ehcache\4.3.11.Final\hibernate-ehcache-4.3.11.Final.jar;D:\mvn-repository\org\hibernate\javax\persistence\hibernate-jpa-2.1-api\1.0.0.Final\hibernate-jpa-2.1-api-1.0.0.Final.jar;D:\mvn-repository\org\apache\httpcomponents\httpclient\4.4.1\httpclient-4.4.1.jar;D:\mvn-repository\org\apache\httpcomponents\httpclient-cache\4.4.1\httpclient-cache-4.4.1.jar;D:\mvn-repository\org\apache\httpcomponents\httpcore\4.4.1\httpcore-4.4.1.jar;D:\mvn-repository\org\apache\httpcomponents\httpmime\4.4.1\httpmime-4.4.1.jar;D:\mvn-repository\com\fasterxml\jackson\core\jackson-annotations\2.7.0\jackson-annotations-2.7.0.jar;D:\mvn-repository\com\fasterxml\jackson\core\jackson-core\2.7.4\jackson-core-2.7.4.jar;D:\mvn-repository\org\codehaus\jackson\jackson-core-asl\1.9.7\jackson-core-asl-1.9.7.jar;D:\mvn-repository\org\codehaus\jackson\jackson-core-lgpl\1.9.7\jackson-core-lgpl-1.9.7.jar;D:\mvn-repository\com\fasterxml\jackson\core\jackson-databind\2.7.4\jackson-databind-2.7.4.jar;D:\mvn-repository\org\codehaus\jackson\jackson-mapper-asl\1.9.7\jackson-mapper-asl-1.9.7.jar;D:\mvn-repository\org\codehaus\jackson\jackson-mapper-lgpl\1.9.7\jackson-mapper-lgpl-1.9.7.jar;D:\mvn-repository\com\jamonapi\jamon\2.4\jamon-2.4.jar;D:\mvn-repository\org\jboss\jandex\1.1.0.Final\jandex-1.1.0.Final.jar;D:\mvn-repository\org\javassist\javassist\3.18.1-GA\javassist-3.18.1-GA.jar;D:\mvn-repository\org\jboss\logging\jboss-logging\3.1.3.GA\jboss-logging-3.1.3.GA.jar;D:\mvn-repository\org\jboss\logging\jboss-logging-annotations\1.2.0.Beta1\jboss-logging-annotations-1.2.0.Beta1.jar;D:\mvn-repository\org\jboss\spec\javax\transaction\jboss-transaction-api_1.2_spec\1.0.0.Final\jboss-transaction-api_1.2_spec-1.0.0.Final.jar;D:\mvn-repository\net\sf\jopt-simple\jopt-simple\3.0\jopt-simple-3.0.jar;D:\mvn-repository\com\googlecode\json-simple\json-simple\1.1\json-simple-1.1.jar;D:\mvn-repository\javax\servlet\jstl\1.2\jstl-1.2.jar;D:\mvn-repository\javax\servlet\servlet-api\3.0\servlet-api-3.0.jar;D:\mvn-repository\net\sourceforge\jtds\jtds\1.2.4\jtds-1.2.4.jar;D:\mvn-repository\net\sf\jxls\jxls-core\1.0.3\jxls-core-1.0.3.jar;D:\mvn-repository\org\apache\commons\commons-jexl\2.0.1\commons-jexl-2.0.1.jar;D:\mvn-repository\net\sf\jxls\jxls-reader\1.0.3\jxls-reader-1.0.3.jar;D:\mvn-repository\log4j\log4j\1.2.17\log4j-1.2.17.jar;D:\mvn-repository\javax\mail\mail\1.4.3\mail-1.4.3.jar;D:\mvn-repository\javax\activation\activation\1.1\activation-1.1.jar;D:\mvn-repository\org\mybatis\mybatis\3.3.0\mybatis-3.3.0.jar;D:\mvn-repository\org\mybatis\mybatis-spring\1.2.3\mybatis-spring-1.2.3.jar;D:\mvn-repository\mysql\mysql-connector-java\5.1.27\mysql-connector-java-5.1.27.jar;D:\mvn-repository\com\oracle\ojdbc6\11.2.0.1.0\ojdbc6-11.2.0.1.0.jar;D:\mvn-repository\p6spy\p6spy\1.3\p6spy-1.3.jar;D:\mvn-repository\org\apache\poi\poi\3.14\poi-3.14.jar;D:\mvn-repository\org\apache\poi\poi-ooxml\3.14\poi-ooxml-3.14.jar;D:\mvn-repository\org\apache\poi\poi-ooxml-schemas\3.14\poi-ooxml-schemas-3.14.jar;D:\mvn-repository\org\apache\xmlbeans\xmlbeans\2.6.0\xmlbeans-2.6.0.jar;D:\mvn-repository\stax\stax-api\1.0.1\stax-api-1.0.1.jar;D:\mvn-repository\com\github\virtuald\curvesapi\1.03\curvesapi-1.03.jar;D:\mvn-repository\org\apache\poi\poi-scratchpad\3.14\poi-scratchpad-3.14.jar;D:\mvn-repository\org\springframework\spring-aop\4.1.9.RELEASE\spring-aop-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-aspects\4.1.9.RELEASE\spring-aspects-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-beans\4.1.9.RELEASE\spring-beans-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-context\4.1.9.RELEASE\spring-context-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-context-support\4.1.9.RELEASE\spring-context-support-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-core\4.1.9.RELEASE\spring-core-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-expression\4.1.9.RELEASE\spring-expression-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-instrument\4.1.9.RELEASE\spring-instrument-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-instrument-tomcat\4.1.9.RELEASE\spring-instrument-tomcat-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-jdbc\4.1.9.RELEASE\spring-jdbc-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-jms\4.1.9.RELEASE\spring-jms-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-messaging\4.1.9.RELEASE\spring-messaging-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-orm\4.1.9.RELEASE\spring-orm-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-oxm\4.1.9.RELEASE\spring-oxm-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-test\4.1.9.RELEASE\spring-test-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-tx\4.1.9.RELEASE\spring-tx-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-web\4.1.9.RELEASE\spring-web-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-webmvc\4.1.9.RELEASE\spring-webmvc-4.1.9.RELEASE.jar;D:\mvn-repository\org\springframework\spring-webmvc-portlet\4.1.9.RELEASE\spring-webmvc-portlet-4.1.9.RELEASE.jar;D:\mvn-repository\taglibs\standard\1.1.2\standard-1.1.2.jar;D:\mvn-repository\com\googlecode\xmemcached\xmemcached\1.4.3\xmemcached-1.4.3.jar;D:\mvn-repository\net\sf\json-lib\json-lib\2.4\json-lib-2.4-jdk15.jar;D:\mvn-repository\org\mongodb\mongo-java-driver\3.4.0\mongo-java-driver-3.4.0.jar;D:\mvn-repository\org\springframework\data\spring-data-mongodb\1.8.4.RELEASE\spring-data-mongodb-1.8.4.RELEASE.jar;D:\mvn-repository\org\slf4j\jcl-over-slf4j\1.7.13\jcl-over-slf4j-1.7.13.jar;D:\mvn-repository\org\springframework\data\spring-data-commons\1.11.4.RELEASE\spring-data-commons-1.11.4.RELEASE.jar;D:\mvn-repository\com\rabbitmq\amqp-client\3.6.5\amqp-client-3.6.5.jar;D:\mvn-repository\org\slf4j\slf4j-log4j12\1.7.2\slf4j-log4j12-1.7.2.jar;D:\mvn-repository\org\slf4j\slf4j-api\1.7.2\slf4j-api-1.7.2.jar;D:\mvn-repository\org\xhtmlrenderer\core-renderer\R8pre2\core-renderer-R8pre2.jar;D:\mvn-repository\com\lowagie\itext\2.1.0\itext-2.1.0.jar;D:\mvn-repository\bouncycastle\bcmail-jdk14\136\bcmail-jdk14-136.jar;D:\mvn-repository\bouncycastle\bcprov-jdk14\136\bcprov-jdk14-136.jar;D:\mvn-repository\fr\opensagres\xdocreport\org.apache.poi.xwpf.converter.core\1.0.6\org.apache.poi.xwpf.converter.core-1.0.6.jar;D:\mvn-repository\org\apache\poi\ooxml-schemas\1.1\ooxml-schemas-1.1.jar;D:\mvn-repository\fr\opensagres\xdocreport\org.apache.poi.xwpf.converter.xhtml\1.0.6\org.apache.poi.xwpf.converter.xhtml-1.0.6.jar;D:\mvn-repository\fr\opensagres\xdocreport\org.apache.poi.xwpf.converter.pdf\1.0.6\org.apache.poi.xwpf.converter.pdf-1.0.6.jar;D:\mvn-repository\fr\opensagres\xdocreport\fr.opensagres.xdocreport.itext.extension\1.0.6\fr.opensagres.xdocreport.itext.extension-1.0.6.jar;D:\mvn-repository\org\jsoup\jsoup\1.10.3\jsoup-1.10.3.jar;D:\mvn-repository\colt\colt\1.2.0\colt-1.2.0.jar;D:\mvn-repository\org\openjdk\jmh\jmh-core\1.0\jmh-core-1.0.jar;D:\mvn-repository\org\apache\commons\commons-math3\3.2\commons-math3-3.2.jar;D:\mvn-repository\org\openjdk\jmh\jmh-generator-annprocess\1.0\jmh-generator-annprocess-1.0.jar;D:\mvn-repository\net\jpountz\lz4\lz4\1.3.0\lz4-1.3.0.jar;D:\mvn-repository\org\xerial\snappy\snappy-java\1.1.1.6\snappy-java-1.1.1.6.jar;D:\mvn-repository\org\apache\mina\mina-core\2.0.0\mina-core-2.0.0.jar;D:\mvn-repository\com\alibaba\fastjson\1.2.12\fastjson-1.2.12.jar;D:\mvn-repository\org\bouncycastle\bcprov-jdk15on\1.59\bcprov-jdk15on-1.59.jar;D:\mvn-repository\org\bouncycastle\bcpkix-jdk15on\1.59\bcpkix-jdk15on-1.59.jar;D:\mvn-repository\org\antlr\antlr4-runtime\4.7\antlr4-runtime-4.7.jar
        @SuppressWarnings("restriction")
        URL[] urls=sun.misc.Launcher.getBootstrapClassPath().getURLs();
        for (int i = 0; i < urls.length; i++) {
        System.out.println(urls[i].toExternalForm());
        }*/
        //new File("D:/classes/cn/roilat/study/java/basic/classloader").mkdirs();

        Class<?> clazz = new MyClassLoader("D:/classes").loadClass("cn.roilat.study.java.basic.classloader.TestClassLoader");
        System.out.println(clazz);

        //URLClassLoader ucl = new URLClassLoader(new URL[] {new URL("")});
        
        @SuppressWarnings("unused")
        sun.misc.Launcher launcher;
        ClassLoader cl = TestClassLoader3.class.getClassLoader();

        System.out.println("ClassLoader is:"+cl.toString());//sun.misc.Launcher$AppClassLoader@659e0bfd
        System.out.println("ClassLoader is:"+cl.getParent().toString());//ClassLoader is:sun.misc.Launcher$ExtClassLoader@3d71d552


        cl = int.class.getClassLoader();

        System.out.println("ClassLoader is:"+cl.toString());
    }
    public void test1() throws ClassNotFoundException {
        System.out.println("这个类当前类加载器应该是找不到的。。。");
        System.out.println(this.getClass().getClassLoader().loadClass("cn.roilat.study.java.basic.classloader.TestClassLoader2"));
    }
    public void test2() throws ClassNotFoundException {
        System.out.println("如果使用线程当前的类加载器，应该是可以加载的。。。");
        System.out.println(Thread.currentThread().getContextClassLoader().loadClass("cn.roilat.study.java.basic.classloader.TestClassLoader2"));
    }
}
